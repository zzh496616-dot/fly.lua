local G=game;local RS=G:GetService("RunService");local UIS=G:GetService("UserInputService");local SG=G:GetService("StarterGui");local P=G:GetService("Players").LocalPlayer;repeat wait()until P.Character;local HRP=P.Character:WaitForChild("HumanoidRootPart");local H=P.Character:WaitForChild("Humanoid");P.Character:AddTag("OnCannon");local CGS=G:GetService("CollectionService");if not CGS:GetCollisionGroup("FlyNoClip")then CGS:CreateCollisionGroup("FlyNoClip")end;CGS:RemovePartFromCollisionGroup(HRP,CGS:GetDefaultCollisionGroupName());CGS:AddPartToCollisionGroup(HRP,"FlyNoClip");CGS:SetCollidable("FlyNoClip",CGS:GetDefaultCollisionGroupName(),false);local S=Instance.new("ScreenGui");S.ResetOnSpawn=false;S.Parent=P.PlayerGui;local F=Instance.new("Frame");F.Size=UDim2.new(0,200,0,180);F.Position=UDim2.new(0.8,0,0.2,0);F.BackgroundColor3=Color3.fromRGB(30,30,30);F.BorderSizePixel=0;F.Parent=S;local T=Instance.new("TextLabel");T.Size=UDim2.new(1,0,0,40);T.BackgroundTransparency=1;T.Text="飞行系统";T.TextColor3=Color3.fromRGB(255,255,255);T.Font=Enum.Font.GothamBold;T.TextSize=18;T.Parent=F;local B=Instance.new("TextButton");B.Position=UDim2.new(0,10,0,50);B.Size=UDim2.new(1,-20,0,30);B.Text="启用飞行";B.Font=Enum.Font.Gotham;B.TextSize=16;B.TextColor3=Color3.fromRGB(255,255,255);B.BackgroundColor3=Color3.fromRGB(70,130,255);B.Parent=F;local SS=Instance.new("Frame");SS.Position=UDim2.new(0,10,0,90);SS.Size=UDim2.new(1,-20,0,30);SS.BackgroundColor3=Color3.fromRGB(50,50,50);SS.Parent=F;local SL=Instance.new("TextLabel");SL.Position=UDim2.new(0,0,0,-25);SL.Size=UDim2.new(1,0,0,20);SL.BackgroundTransparency=1;SL.Text="速度: 50";SL.TextColor3=Color3.fromRGB(200,200,200);SL.TextSize=14;SL.Font=Enum.Font.Gotham;SL.Parent=SS;local SF=Instance.new("Frame");SF.Size=UDim2.new(1,0,1,0);SF.BackgroundTransparency=1;SF.Parent=SS;local SH=Instance.new("ImageLabel");SH.Size=UDim2.new(0,12,1,4);SH.Position=UDim2.new(0.5,0,0,-2);SH.Image="rbxassetid://3649535439";SH.ImageColor3=Color3.fromRGB(70,130,255);SH.BackgroundTransparency=1;SH.Parent=SF;local C=workspace.CurrentCamera;local E,F,BK,L,R,U,D=false,false,false,false,false,false,false,false;local SPD=50;UIS.InputBegan:Connect(function(I,G)if G then return end;if I.KeyCode==Enum.KeyCode.W then F=true end;if I.KeyCode==Enum.KeyCode.S then BK=true end;if I.KeyCode==Enum.KeyCode.A then L=true end;if I.KeyCode==Enum.KeyCode.D then R=true end;if I.KeyCode==Enum.KeyCode.Space then U=true end;if I.KeyCode==Enum.KeyCode.LeftControl then D=true end;if I.KeyCode==Enum.KeyCode.E then E=not E;B.Text=E and"禁用飞行"or"启用飞行";B.BackgroundColor3=E and Color3.fromRGB(255,70,70)or Color3.fromRGB(70,130,255)end end);UIS.InputEnded:Connect(function(I,G)if G then return end;if I.KeyCode==Enum.KeyCode.W then F=false end;if I.KeyCode==Enum.KeyCode.S then BK=false end;if I.KeyCode==Enum.KeyCode.A then L=false end;if I.KeyCode==Enum.KeyCode.D then R=false end;if I.KeyCode==Enum.KeyCode.Space then U=false end;if I.KeyCode==Enum.KeyCode.LeftControl then D=false end end);local DR=false;SH.InputBegan:Connect(function(I)if I.UserInputType==Enum.UserInputType.MouseButton1 then DR=true end end);SH.InputEnded:Connect(function(I)if I.UserInputType==Enum.UserInputType.MouseButton1 then DR=false end end);UIS.InputChanged:Connect(function(I)if I.UserInputType==Enum.UserInputType.MouseMovement and DR then local X=(G:GetService("Mouse").X-SF.AbsolutePosition.X)/SS.AbsoluteSize.X;SPD=math.clamp(10+math.floor(X*190),10,200);SL.Text="速度: "..SPD;SH.Position=UDim2.new(math.clamp(X,0,1),0,0,-2)end end);B.MouseButton1Click:Connect(function()E=not E;B.Text=E and"禁用飞行"or"启用飞行";B.BackgroundColor3=E and Color3.fromRGB(255,70,70)or Color3.fromRGB(70,130,255)end);RS.Heartbeat:Connect(function(STEP)if not E or not HRP or H.Health<=0 then return end;local CF=C.CFrame;local MV=Vector3.new(0,0,0);if F then MV=MV-CF.LookVector end;if BK then MV=MV+CF.LookVector end;if L then MV=MV-CF.RightVector end;if R then MV=MV+CF.RightVector end;if U then MV=MV+Vector3.new(0,1,0)end;if D then MV=MV-Vector3.new(0,1,0)end;if MV.Magnitude>0 then MV=MV.Unit end;HRP.CFrame=HRP.CFrame+MV*SPD*STEP end);print("【飞行+穿墙已加载】E键开关 | 拖动调节速度")
